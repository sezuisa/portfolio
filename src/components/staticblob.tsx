import { useId } from "react";

type StaticBlobProps = {
  src?: string;
  alt?: string;
  blobType?: number; // 0-based index
  fillColor?: string; // fallback if no image
  className?: string;
};

const blobPaths = [
  "M38.2,-58.3C51.1,-49.1,63.6,-39.4,68.4,-26.7C73.1,-14,70,-1.2,65.8,10.5C61.7,22.2,56.4,32.8,47.7,42.5C38.9,52.2,26.8,60.8,13.1,65.6C-0.5,70.3,-15.9,71.3,-30.6,66.5C-45.4,61.7,-59.5,51.2,-67.8,37.4C-76,23.6,-78.3,6.5,-73.5,-8.2C-68.7,-22.9,-56.8,-35.2,-44.8,-45.4C-32.7,-55.7,-20.5,-63.9,-6.3,-65.9C8,-67.9,16.1,-63.6,38.2,-58.3Z",
  "M36.9,-63.6C50.7,-56.7,66.8,-51,69.7,-40.3C72.7,-29.6,62.6,-13.8,57.7,2.4C52.9,18.6,53.3,35.3,44.6,45.2C35.8,55.1,17.9,58.1,1.3,56.3C-15.3,54.5,-30.6,48,-40.6,37.5C-50.7,27,-55.5,12.4,-57.2,-2.8C-58.9,-18.1,-57.5,-33.9,-49.7,-43.3C-41.8,-52.6,-27.5,-55.5,-13.4,-61.3C0.6,-67.1,14.4,-75.9,26.3,-73.6C38.1,-71.3,48.9,-58.1,36.9,-63.6Z",
  "M41.7,-65.7C53.9,-57.4,63.4,-45.6,70.1,-32.1C76.9,-18.6,80.9,-3.5,76.7,9.3C72.5,22.1,60.1,32.7,48.3,44.4C36.6,56.1,25.4,68.9,10.9,72.5C-3.6,76.1,-21.3,70.6,-34.4,60.8C-47.6,51.1,-56.3,37,-63.5,22.4C-70.8,7.9,-76.7,-7.1,-71.4,-18.7C-66,-30.3,-49.4,-38.4,-35.2,-45.9C-21,-53.4,-10.5,-60.3,2.2,-63.3C15,-66.4,30,-65.8,41.7,-65.7Z",
  "M31.4,-52.9C42.4,-43.9,53.5,-35.2,59.6,-23.5C65.7,-11.9,66.9,3.6,61.1,16.4C55.2,29.2,42.3,39.2,30.2,48.1C18.1,57,6.1,64.9,-5.5,71C-17.1,77.1,-34.3,81.5,-43.6,72.7C-53,64,-54.5,42.2,-60.9,24.4C-67.2,6.6,-78.4,-7.2,-73.5,-18.3C-68.5,-29.4,-47.5,-37.8,-32.2,-47.4C-16.9,-57,-8.4,-67.8,1.8,-71.1C11.9,-74.4,23.8,-70.2,31.4,-52.9Z",
];

export default function StaticBlob({
  src,
  alt = "Blob",
  blobType = 0,
  fillColor = "#f87171",
  className = "",
}: StaticBlobProps) {
  const id = useId();
  const path = blobPaths[blobType % blobPaths.length];

  return (
    <div className={`relative ${className}`}>
      <svg
        viewBox="-100 -100 200 200"
        className="absolute inset-0 w-full h-full"
      >
        <defs>
          <clipPath id={id}>
            <path d={path} />
          </clipPath>
        </defs>
        <g clipPath={`url(#${id})`}>
          {src ? (
            <image
              href={src}
              x="-100"
              y="-100"
              width="200"
              height="200"
              preserveAspectRatio="xMidYMid slice"
            />
          ) : (
            <rect x="-100" y="-100" width="200" height="200" fill={fillColor} />
          )}
        </g>
      </svg>
    </div>
  );
}
